# 状态管理 (State)

## 1. 模块概述

继承自 `QObject`，使用 PyQt 信号机制管理全局状态，提供线程安全的状态访问和变更通知。

## 2. 状态属性

```python
communication_thread: bool      # 通信线程运行状态
data_processing_thread: bool    # 数据处理线程运行状态
data_queue_status: str          # 数据队列状态
device_ip: str                  # 设备IP
device_port: int                # 设备端口
```

## 3. 信号机制

```python
connection_changed = pyqtSignal(bool)  # 连接状态变化信号
```

## 4. 属性封装

```python
@property
def communication_thread(self):
    return self._communication_thread

@communication_thread.setter
def communication_thread(self, value):
    if self._communication_thread != value:
        self._communication_thread = value
        self.connection_changed.emit(value)  # 自动发出信号
```

## 5. 设计模式

采用 **观察者模式**：
- State 是被观察者
- UI组件是观察者
- 通过 PyQt 信号自动通知所有观察者

## 6. 使用示例

```python
# 监听状态变化
state.connection_changed.connect(self.on_state_changed)

# 修改状态（自动触发信号）
state.communication_thread = True
```